"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550,1583],{60550:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var i=a(74848);let r=a(33540).Ay.div.withConfig({componentId:"sc-18f301cd-0"})(["align-items:center;background-color:#000;display:flex;height:100%;width:100%;canvas{image-rendering:pixelated;image-rendering:crisp-edges;position:absolute;top:0 !important;touch-action:none;-webkit-touch-callout:none;user-select:none;width:100%;}div,video{display:none;}.emulator-mouse-overlay{display:block;inset:0;position:absolute;}"]);var n=a(96540);let s={emulatorFunction:"dosWorker"},o=["__core-js_shared__","compiled","core","emulatorsUi","exports","WDOSBOX","worker"],l=".zip.save",d={".jsdos/dosbox.conf":"/Program Files/js-dos/dosbox.conf",".jsdos/jsdos.json":"/Program Files/js-dos/jsdos.json"},c=new Set(["Alt","ContextMenu","F1","F3","F5","F6","F7","F10","F11","F12"]);var h=a(16286),u=a(55650),w=a(25559),f=a(99204),p=a(48060),m=a(37e3),b=a(81005),g=a(40978),y=a(48287).Buffer;let x=async(e,t)=>{let{addFileToZip:i,isFileInZip:r}=await a.e(6789,"high").then(a.bind(a,16789));return Object.entries(d).reduce(async(e,[a,n])=>{let s=await e;return s.length>0&&await r(s,a)?s:i(s,n,a,t)},Promise.resolve(e))},v=(e,t,i,r)=>{let{appendFileToTitle:s}=(0,u.A)(e),{exists:d,readFile:c}=(0,w.f)(),{linkElement:v,processes:{[e]:k}}=(0,f.N)(),{closing:E}=k||{},[$,j]=(0,n.useState)({}),{createSnapshot:C}=(0,g.p)(),A=(0,n.useCallback)(async(e,t,a=!1)=>{if($[e]&&await C(`${(0,h.basename)(e)}${l}`,y.from(await $[e].persist()||[]),t),a)try{await r?.stop(),await $[e]?.exit()}catch{}},[C,$,r]),F=(0,n.useCallback)(async e=>{let t=await $[e]?.screenshot();return t?(0,m.Jf)(t):void 0},[$]),S=(0,n.useCallback)(async()=>{let n;let[u]=Object.keys($);"string"==typeof u&&(await A(u,await F(u)),j({[t]:void 0}));let w=t?await c(t):y.from(""),f=(0,m.uQ)(t),{zipAsync:g}=await a.e(6789,"high").then(a.bind(a,16789)),k=async e=>y.from(await g({[(0,h.basename)(t)]:e})),E=async e=>(0,m.Zd)(await x(e,c)),C=".exe"===f?await k(w):w;if(".jsdos"===f)n=(0,m.Zd)(C);else try{n=await E(C)}catch{n=await E(await k(w))}let S=(0,h.join)(p.Sb,`${(0,h.basename)(t)}${l}`),T=await d(S)?(0,m.Zd)(await c(S)):void 0,G=await r?.run(n,T);if(G){let a=i.current?.querySelector("canvas");a instanceof HTMLCanvasElement&&(v(e,"peekElement",a),j({[t]:G}),s((0,h.basename)(t)),(0,m.E)(n),T&&(0,m.E)(T),(0,b.v)(o))}},[s,A,i,$,r,d,e,v,c,F,t]);return(0,n.useEffect)(()=>(!k||E||!r||t in $||S(),()=>{if(E){if(t){let e=e=>{window.setTimeout(()=>A(t,e,E),p.UW.WINDOW)};F(t).then(e).catch(e)}else r?.stop()}}),[A,E,$,r,S,k,F,t]),$[t]};var k=a(16602),E=a(85531),$=a(45694);let j=e=>{c.has(e.key)&&e.preventDefault()},C=({containerRef:e,id:t,loading:a,setLoading:i,url:r})=>{let{updateWindowSize:o}=(0,E.A)(t),[l,d]=(0,n.useState)(),c=(0,k.A)(),h=(0,n.useRef)(!1),{foregroundId:u}=(0,$.w)(),w=v(t,r,e,l),{closeWithTransition:b,processes:{[t]:{libs:g=[]}={}}={}}=(0,f.N)();(0,n.useEffect)(()=>{l||h.current||(h.current=!0,(0,m.aY)(g).then(()=>{if(window.emulators&&(window.emulators.pathPrefix="/Program Files/js-dos/",e.current)){let t=e.current.closest("section");t?.addEventListener("keydown",j,{capture:!0}),t?.addEventListener("keyup",j,{capture:!0}),t?.addEventListener("focus",()=>e.current?.focus(p.VD),{passive:!0}),d(window.Dos(e.current,s))}}))},[e,l,g]),(0,n.useEffect)(()=>{if(w&&a){o(w.height(),w.width());let a=w.events();a.onMessage((e,a)=>{if(a.startsWith("[LOG_EXEC]")){let[,e]=a.split("[LOG_EXEC]"),[i]=e.replace("Parsing command line: ","").split(" ");"EXIT"===i.toUpperCase()&&b(t)}}),a.onFrameSize(()=>{let t=e.current?.querySelector("canvas"),[a,i]=[(0,m.kl)(t?.style.width),(0,m.kl)(t?.style.height)],{height:r=0,width:n=0}=t?.getBoundingClientRect()||{};i&&a&&(i!==r||a!==n)&&o(i,a)}),a.onExit(()=>window.SimpleKeyboardInstances?.emulatorKeyboard?.destroy()),i(!1),c(window.JSDOS_FS,"JS-DOS")}},[b,e,w,l?.layers,t,a,c,i,o]),(0,n.useLayoutEffect)(()=>{t!==u||a||e.current?.focus(p.VD)},[e,a,u,t])};var A=a(14153);let F=({id:e})=>(0,i.jsx)(A.A,{StyledComponent:r,id:e,useHook:C})},14153:(e,t,a)=>{a.d(t,{A:()=>c});var i=a(74848),r=a(96540),n=a(33540),s=a(51583),o=a(8218),l=a(99204);let d=n.Ay.div.withConfig({componentId:"sc-5da8521e-0"})([""]),c=(0,r.memo)(({id:e,useHook:t,StyledComponent:a,children:n})=>{let{processes:{[e]:{url:c=""}={}}}=(0,l.N)(),h=(0,r.useRef)(null),[u,w]=(0,r.useState)(!0),f=(0,r.useMemo)(()=>({contain:"strict",visibility:u?"hidden":"visible"}),[u]);return t({containerRef:h,id:e,loading:u,setLoading:w,url:c}),(0,i.jsxs)(i.Fragment,{children:[u&&(0,i.jsx)(s.default,{}),(0,i.jsx)(a||d,{ref:h,style:f,...(0,o.A)({id:e}),children:n})]})})},51583:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});let i=a(33540).Ay.div.withConfig({componentId:"sc-29e5eb62-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;justify-content:center;mix-blend-mode:difference;padding-top:18px;}'])},16602:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(96540),r=a(25559);let n=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:a}=(0,r.f)(),n=(0,i.useRef)("");return(0,i.useEffect)(()=>()=>{if(n.current){let e=n.current;n.current="",t(e,!0).then(()=>a("/",void 0,e)).catch(()=>{})}},[t,a]),(0,i.useCallback)(async(t,i)=>{if(!t)return;let r="";try{r=await e(t,i)}catch{}r&&(a("/",r),n.current=r)},[e,a])}},8218:(e,t,a)=>{a.d(t,{A:()=>f});var i=a(16286),r=a(96540),n=a(51780),s=a(16091),o=a(13296),l=a(25559),d=a(99204),c=a(45694),h=a(48060),u=a(37e3),w=a(63461);let f=({callback:e,directory:t=h.Bn,id:a,onDragLeave:f,onDragOver:p,updatePositions:m})=>{let{url:b}=(0,d.N)(),g=(0,w.w)(),{iconPositions:y,sortOrders:x,setIconPositions:v}=(0,c.w)(),{exists:k,mkdirRecursive:E,updateFolder:$,writeFile:j}=(0,l.f)(),C=(0,r.useCallback)(async(e,t,r)=>{if(a){if(t){let n=(0,i.join)(h.Bn,e);if(await E(h.Bn),await j(n,t,!0))return r===o.z.UPDATE_URL&&b(a,n),$(h.Bn,e),(0,i.basename)(n)}else r===o.z.UPDATE_URL&&b(a,e)}return""},[a,E,$,b,j]),{openTransferDialog:A}=(0,n.A)();return{onDragLeave:f,onDragOver:(0,r.useCallback)(e=>{p?.(e),(0,u.CH)(e)},[p]),onDrop:(0,r.useCallback)(r=>{if(h.jj.has((0,u.uQ)(t)))return;if(m&&r.target instanceof HTMLElement){let{files:e,text:a}=(0,s.bn)(r);if(0===e.length&&""===a)return;(async()=>{let n={x:r.clientX,y:r.clientY},s=[];if(a){try{s=JSON.parse(a)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,i.basename)(e)===(0,i.relative)(t,e))return;s=s.map(e=>(0,i.basename)(e))}else e instanceof FileList?s=[...e].map(e=>e.name):s=[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);s=await Promise.all(s.map(async e=>{let a=`${t}/${e}`;if(!y[a]||!await k(a))return e;let r=0;do r+=1,a=`${t}/${(0,i.basename)(e,(0,i.extname)(e))} (${r})${(0,i.extname)(e)}`;while(y[a]&&await k(a));return(0,i.basename)(a)})),(0,u.$Y)(t,r.target,y,x,n,s,v,k)})()}let n="string"==typeof a;n&&!m&&t===h.Bn&&g.current[a]?.componentWindow?.focus(h.VD),(0,s.nX)(r,e||C,t,A,n)},[e,t,k,y,a,A,g,v,x,m,C])}}},79808:(e,t,a)=>{a.d(t,{Ay:()=>o,EX:()=>r,Ho:()=>i,WB:()=>n,lH:()=>s});let i={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},r={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},n=30,s=166,o={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${n}px`,minWidth:`${s}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}}},36864:(e,t,a)=>{a.d(t,{Gn:()=>s,Ve:()=>d,WZ:()=>c,Xc:()=>l,r_:()=>o});var i=a(79808),r=a(48060),n=a(37e3);let s=(e,t,a=[],i=0)=>{let[s]=e.split(r.QB),o=`${s}${r.QB}`,l=a.find(e=>e.startsWith(o))||"",{componentWindow:d}=t?.[l]||{},{x:c=0,y:h=0,width:u=0,height:w=0}=d?.getBoundingClientRect()||{};return!(c+i+u>(0,n.e8)()||h+i+w>(0,n.Bv)())&&(c||h)?{x:c+i,y:h+i}:void 0},o=({height:e,width:t})=>{let[a,i]=[(0,n.Bv)(),(0,n.e8)()];return{x:Math.floor(i/2-(0,n.kl)(t)/2),y:Math.floor((a-r.D5)/2-(0,n.kl)(e)/2)}},l={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},d=(e,t,a=!1)=>{let{position:i,size:r}=e||{},{x:s=0,y:o=0}=i||{},{height:d=0,width:c=0}=r||{};return a?s+l.RIGHT>t.x||s+(0,n.kl)(c)-l.LEFT<0||o+l.BOTTOM>t.y||o+l.TOP<0:s<0||o<0||s+(0,n.kl)(c)>t.x||o+(0,n.kl)(d)>t.y},c=(e,t)=>{let a=Number(e.height),s=Number(e.width),[o,l]=[(0,n.Bv)(),(0,n.e8)()],d=o-r.D5,c=Math.max(i.WB,Math.min(a,d)),h=Math.max(i.lH,Math.min(s,l));if(!t)return{height:c,width:h};let u=a===c,w=s===h;return u||w?u?w?{height:c,width:h}:{height:Math.round(c/(s/h)),width:h}:{height:c,width:Math.round(h/(a/c))}:a>s?{height:c,width:Math.round(h/(d/c))}:{height:Math.round(c/(l/h)),width:h}}},55650:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(96540),r=a(99204),n=a(25573),s=a(48060);let o=e=>{let{title:t}=(0,r.N)(),[a]=e.split(s.QB),{title:o}=n.A[a]||{};return{appendFileToTitle:(0,i.useCallback)((a,i)=>{let r=a?` - ${a}${i?` ${s.g6}`:""}`:"";t(e,`${o}${r}`)},[e,o,t]),prependFileToTitle:(0,i.useCallback)((a,i,r)=>{let n=a?`${i?`${s.g6} `:""}${a}${r?" ":" - "}`:"";t(e,`${n}${o}`)},[e,o,t])}}},85531:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(33540),r=a(96540),n=a(36864),s=a(99204),o=a(45694);let l=e=>{let{setWindowStates:t}=(0,o.w)(),{processes:{[e]:{lockAspectRatio:a=!1,maximized:l=!1}={}}={}}=(0,s.N)(),{sizes:{titleBar:d}}=(0,i.DP)();return{updateWindowSize:(0,r.useCallback)((i,r)=>t(t=>({...t,[e]:{...t?.[e],maximized:l,size:(0,n.WZ)({height:i+d.height,width:r},a)}})),[e,a,l,t,d.height])}}},40978:(e,t,a)=>{a.d(t,{p:()=>o});var i=a(16286),r=a(96540),n=a(25559),s=a(48060);let o=()=>{let{createPath:e,updateFolder:t}=(0,n.f)();return{createSnapshot:(0,r.useCallback)(async(a,r,n,o=!0,l=s.Sb)=>{let d="";try{if((d=await e(a,l,r,void 0,o))&&n)try{let t="function"==typeof n?await n():n;t&&await e(`${(0,i.join)(l,d)}${s.V9}`,s.jv,t,void 0,o)}catch{}t((0,i.dirname)(l)),t(l,d)}catch{}return d},[e,t])}}},81005:(e,t,a)=>{a.d(t,{$:()=>s,v:()=>n});let i="DEFAULT",r="__setter__",n=e=>e.forEach(e=>{if(e in window)try{delete window[e]}finally{Object.assign(window,{[e]:void 0})}}),s=(e,t,a)=>{if(setTimeout(()=>{window.sharedGlobals&&e in window.sharedGlobals&&(window.sharedGlobals[e][r]=i)},a),window.sharedGlobals=window.sharedGlobals||{},e in window.sharedGlobals)window.sharedGlobals[e][r]=t;else{let a=window[e];window.sharedGlobals[e]={[i]:a,[r]:t},Object.defineProperty(window,e,{get(){if(window.sharedGlobals&&e in window.sharedGlobals){let{stack:t=""}=Error(),a=Object.keys(window.sharedGlobals[e]).filter(e=>![i,r].includes(e)).find(e=>new RegExp(e).test(t));return window.sharedGlobals[e][a||i]}return a},set(t){window.sharedGlobals&&e in window.sharedGlobals&&(window.sharedGlobals[e][window.sharedGlobals[e][r]]=t)}})}}}}]);