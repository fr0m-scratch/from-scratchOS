"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1583,7145],{67145:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(74848),r=n(16286),i=n(96540),l=n(99204),s=n(37e3),o=n(25559),d=n(55650),c=n(67255);let u=({containerRef:e,id:t,setLoading:n,url:a})=>{let{processes:{[t]:{closing:u,libs:m=[]}={}}={}}=(0,l.N)(),{readFile:f}=(0,o.f)(),y=(0,i.useRef)(void 0),{appendFileToTitle:p}=(0,d.A)(t),h=(0,c.A)(t,e,void 0,"canvas { image-rendering: pixelated; }",!0),v=(0,i.useCallback)(async e=>{(async e=>{let t=h?.();if(!t)return;y.current=a,n(!0);let i=t.document.querySelector("#canvas");i.addEventListener("contextmenu",s.CH),t.Module={arguments:e?[e]:void 0,canvas:i,postRun:()=>n(!1)},await (0,s.aY)(m,void 0,void 0,void 0,t),e&&p((0,r.basename)(a))})(e?`${(0,s.Zd)(await f(e))}?e=.tic`:"")},[p,h,m,f,n,a]);(0,i.useEffect)(()=>{a===y.current||u||v(a)},[u,v,a])};var m=n(14153);let f=({id:e})=>(0,a.jsx)(m.A,{id:e,useHook:u})},14153:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(74848),r=n(96540),i=n(33540),l=n(51583),s=n(8218),o=n(99204);let d=i.Ay.div.withConfig({componentId:"sc-5da8521e-0"})([""]),c=(0,r.memo)(({id:e,useHook:t,StyledComponent:n,children:i})=>{let{processes:{[e]:{url:c=""}={}}}=(0,o.N)(),u=(0,r.useRef)(null),[m,f]=(0,r.useState)(!0),y=(0,r.useMemo)(()=>({contain:"strict",visibility:m?"hidden":"visible"}),[m]);return t({containerRef:u,id:e,loading:m,setLoading:f,url:c}),(0,a.jsxs)(a.Fragment,{children:[m&&(0,a.jsx)(l.default,{}),(0,a.jsx)(n||d,{ref:u,style:y,...(0,s.A)({id:e}),children:i})]})})},51583:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});let a=n(33540).Ay.div.withConfig({componentId:"sc-29e5eb62-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;justify-content:center;mix-blend-mode:difference;padding-top:18px;}'])},8218:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(16286),r=n(96540),i=n(51780),l=n(16091),s=n(13296),o=n(25559),d=n(99204),c=n(45694),u=n(48060),m=n(37e3),f=n(63461);let y=({callback:e,directory:t=u.Bn,id:n,onDragLeave:y,onDragOver:p,updatePositions:h})=>{let{url:v}=(0,d.N)(),b=(0,f.w)(),{iconPositions:w,sortOrders:g,setIconPositions:$}=(0,c.w)(),{exists:A,mkdirRecursive:E,updateFolder:k,writeFile:C}=(0,o.f)(),x=(0,r.useCallback)(async(e,t,r)=>{if(n){if(t){let i=(0,a.join)(u.Bn,e);if(await E(u.Bn),await C(i,t,!0))return r===s.z.UPDATE_URL&&v(n,i),k(u.Bn,e),(0,a.basename)(i)}else r===s.z.UPDATE_URL&&v(n,e)}return""},[n,E,k,v,C]),{openTransferDialog:L}=(0,i.A)();return{onDragLeave:y,onDragOver:(0,r.useCallback)(e=>{p?.(e),(0,m.CH)(e)},[p]),onDrop:(0,r.useCallback)(r=>{if(u.jj.has((0,m.uQ)(t)))return;if(h&&r.target instanceof HTMLElement){let{files:e,text:n}=(0,l.bn)(r);if(0===e.length&&""===n)return;(async()=>{let i={x:r.clientX,y:r.clientY},l=[];if(n){try{l=JSON.parse(n)}catch{}if(!Array.isArray(l))return;let[e]=l;if(!e||e.startsWith(t)&&(0,a.basename)(e)===(0,a.relative)(t,e))return;l=l.map(e=>(0,a.basename)(e))}else e instanceof FileList?l=[...e].map(e=>e.name):l=[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);l=await Promise.all(l.map(async e=>{let n=`${t}/${e}`;if(!w[n]||!await A(n))return e;let r=0;do r+=1,n=`${t}/${(0,a.basename)(e,(0,a.extname)(e))} (${r})${(0,a.extname)(e)}`;while(w[n]&&await A(n));return(0,a.basename)(n)})),(0,m.$Y)(t,r.target,w,g,i,l,$,A)})()}let i="string"==typeof n;i&&!h&&t===u.Bn&&b.current[n]?.componentWindow?.focus(u.VD),(0,l.nX)(r,e||x,t,L,i)},[e,t,A,w,n,L,b,$,g,h,x])}}},55650:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(96540),r=n(99204),i=n(25573),l=n(48060);let s=e=>{let{title:t}=(0,r.N)(),[n]=e.split(l.QB),{title:s}=i.A[n]||{};return{appendFileToTitle:(0,a.useCallback)((n,a)=>{let r=n?` - ${n}${a?` ${l.g6}`:""}`:"";t(e,`${s}${r}`)},[e,s,t]),prependFileToTitle:(0,a.useCallback)((n,a,r)=>{let i=n?`${a?`${l.g6} `:""}${n}${r?" ":" - "}`:"";t(e,`${i}${s}`)},[e,s,t])}}},67255:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(96540),r=n(8218),i=n(48060),l=n(99204),s=n(45694);let o=e=>{let t=e.createElement("canvas");return t.id="canvas",t.style.width="100%",t.style.height="100%",t.tabIndex=-1,e.body.append(t),t},d=(e,t,n)=>{let a=document.createElement("iframe");a.title=e,a.style.backgroundColor="transparent",a.style.border="0",a.style.width="100%",a.style.height="100%",t.append(a);let r=a.contentDocument;r.open(),r.write(`
    <!DOCTYPE html>
    ${n?`<head><style>${n}</style></head>`:"<head />"}
    <body />
    `),r.close();let i=a.contentWindow;return i.document.documentElement.style.height="100%",i.document.documentElement.style.width="100%",i.document.body.style.height="100%",i.document.body.style.width="100%",i.document.body.style.margin="0",i.document.body.style.overflow="hidden",a},c=(e,t,n,c,u=!1)=>{let[m,f]=(0,a.useState)(),[y,p]=(0,a.useState)(),{onDragOver:h,onDrop:v}=(0,r.A)({id:e}),{processes:{[e]:{maximized:b}={}}={}}=(0,l.N)(),{foregroundId:w,setForegroundId:g}=(0,s.w)(),$=(0,a.useCallback)(()=>{let t;if(!m)return;m.querySelector("iframe")?.remove();let n=d(e,m,c),a=n.contentWindow;u&&(t=o(n.contentDocument));let r=()=>{u&&t?t.focus(i.VD):a.focus(),g(e)};return a.addEventListener("click",r),a.addEventListener("focus",r),a.addEventListener("blur",()=>g("")),a.addEventListener("dragover",h),a.addEventListener("drop",v),p(a),a},[m,e,h,v,g,c,u]);return(0,a.useLayoutEffect)(()=>{y&&w===e&&requestAnimationFrame(()=>{n?n(y):u?y.document.querySelector("canvas")?.focus(i.VD):y.focus()})},[y,n,w,e,b,u]),(0,a.useEffect)(()=>{if(!m){let e=()=>{requestAnimationFrame(()=>{t.current?f(t.current):e()})};e()}},[m,t]),(0,a.useMemo)(()=>m?$:void 0,[m,$])}}}]);