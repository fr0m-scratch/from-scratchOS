"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1583,5678],{61149:(e,t,r)=>{r.d(t,{f:()=>b,A:()=>m});var i=r(74848),n=r(16286),a=r(96540),l=r(16093);let o=r(33540).Ay.div.withConfig({componentId:"sc-8d31798-0"})(["background-position:2px 5px;background-repeat:no-repeat;background-size:16px;border:1px solid rgb(83,83,83);display:flex;height:","px;margin:6px 12px 5px 5px;overflow:hidden;padding:0 22px 2px 25px;position:relative;width:100%;input{background-color:rgb(25,25,25);border-right:1px solid rgb(21,21,21);color:#fff;font-family:",";font-size:12px;font-weight:400;height:","px;padding-bottom:2px;text-overflow:ellipsis;white-space:nowrap;width:calc(100% - 2px);&:focus,&.inputing{height:","px;}}img{left:2px;position:absolute;top:1px;}.action{background-color:rgb(25,25,25);display:flex;height:","px;margin:0;place-content:center;place-items:center;position:absolute;right:0;top:0;width:24px;&:hover{background-color:rgb(27,41,49);border:1px solid rgb(34,114,153);}&:active{background-color:rgb(28,57,71);border:1px solid rgb(38,160,218);}svg{color:rgb(128,128,128);stroke:rgb(128,128,128);&.refresh{position:relative;stroke-width:3;top:-1px;}&.go-to{height:12px;stroke-width:2;width:12px;}}}"],({theme:e})=>e.sizes.fileExplorer.navInputHeight,({theme:e})=>e.formats.systemFont,({theme:e})=>e.sizes.fileExplorer.navInputHeight-2,({theme:e})=>e.sizes.fileExplorer.navInputHeight,({theme:e})=>e.sizes.fileExplorer.navInputHeight-2);var s=r(78744);let A=e=>{let{contextMenu:t}=(0,s.b)();return(0,a.useMemo)(()=>t?.(()=>[{action:()=>navigator.clipboard?.writeText(e),label:"Copy address"}]),[e,t])};var c=r(25559),p=r(99204),u=r(87952),d=r(31251),h=r(48060),g=r(37e3),f=r(91745),x=r(45694);let b={"aria-label":"Address",enterKeyHint:"go",inputMode:"url",name:"address",...h.m8},m=({id:e,ref:t})=>{let r=(0,a.useRef)(null),{open:s,url:m,processes:{[e]:{icon:w,url:v=""}}}=(0,p.N)(),E=(0,a.useMemo)(()=>(0,n.basename)(v)||h.l6,[v]),[y,C]=(0,a.useState)(E),{exists:k,stat:j,updateFolder:S}=(0,c.f)(),{updateRecentFiles:B}=(0,x.w)(),R=(0,a.useMemo)(()=>y!==E&&y!==v&&t&&document.activeElement===t.current,[y,t,E,v]),M=(0,a.useCallback)(async()=>{if(y&&await k(y)){if((await j(y)).isDirectory())m(e,y);else{let e=(0,f.YD)((0,g.uQ)(y));s(e||"OpenWith",{url:y}),e&&B(y,e)}}else(0,g.mX)(y);t?.current?.blur()},[y,t,m,k,e,s,j,B]);return(0,a.useEffect)(()=>{t?.current&&(y===v?t.current.select():y===E?window.getSelection()?.removeAllRanges():document.activeElement!==t.current&&C(E))},[y,t,E,v]),(0,i.jsxs)(o,{children:[(0,i.jsx)(d.A,{alt:E,imgSize:16,src:w}),(0,i.jsx)("input",{ref:t,className:R?"inputing":"",onBlurCapture:({relatedTarget:e})=>{r.current!==e&&C(E)},onChange:({target:e})=>C(e.value),onFocusCapture:()=>C(v),onKeyDown:({key:e})=>{"Enter"===e&&M()},value:y,...b,...A(v)}),(0,i.jsx)(u.A,{ref:r,className:"action",onClick:()=>{C(E),R?M():S(v)},onFocusCapture:()=>setTimeout(()=>C(E),h.UW.DOUBLE_CLICK/2),...(0,g.Pf)(R?`Go to "${y}"`:`Refresh "${E}" (F5)`),children:R?(0,i.jsx)(l.GoTo,{}):(0,i.jsx)(l.Refresh,{})})]})}},45678:(e,t,r)=>{r.r(t),r.d(t,{default:()=>O});var i=r(74848),n=r(16286),a=r(96540),l=r(61149),o=r(16093),s=r(33540);let A=s.Ay.div.withConfig({componentId:"sc-ac0cd6a2-0"})(["border:1px solid rgb(83,83,83);display:flex;height:","px;margin:6px 12px 6px 0;max-width:148px;overflow:hidden;padding:0;position:relative;width:100%;svg{display:none;}input{appearance:none;background-color:rgb(25,25,25);color:#fff;font-family:",";font-size:12px;font-weight:400;height:","px;padding-bottom:2px;padding-left:8px;text-overflow:ellipsis;white-space:nowrap;width:100%;&::-webkit-search-cancel-button{filter:invert(1);padding-right:4px;}&:not(:placeholder-shown){height:","px;}&:focus::placeholder{color:transparent;}}input:placeholder-shown ~ svg{display:block;fill:rgb(113,113,113);height:12px;pointer-events:none;position:absolute;right:6px;stroke:rgb(113,113,113);stroke-width:1;top:5px;width:12px;}"],({theme:e})=>e.sizes.fileExplorer.navInputHeight,({theme:e})=>e.formats.systemFont,({theme:e})=>e.sizes.fileExplorer.navInputHeight-2,({theme:e})=>e.sizes.fileExplorer.navInputHeight);var c=r(68443),p=r(25559),u=r(78744),d=r(99204),h=r(45694),g=r(48060),f=r(37e3),x=r(89622);let b=(0,a.memo)(({id:e})=>{let[t,r]=(0,a.useState)(""),l=(0,a.useRef)(!1),{open:s,processes:{[e]:{url:b=""}}}=(0,d.N)(),m=(0,a.useRef)(null),w=(0,x.SQ)(t),{contextMenu:v}=(0,u.b)(),{fs:E}=(0,p.f)(),{updateRecentFiles:y}=(0,h.w)();return(0,a.useEffect)(()=>{m.current&&l.current&&Promise.all([...w.filter(({ref:e})=>e.startsWith(b)),...w.filter(({ref:e})=>!e.startsWith(b))].slice(0,9).map(async({ref:e})=>{let{icon:t,url:i,pid:a=""}=await (0,c.cK)(E,e)||{};return{action:()=>{s(a,{url:i}),r(""),m.current&&(m.current.value="",m.current.blur()),i&&a&&y(i,a)},icon:t,label:(0,n.basename)(e,g.b3),tooltip:e}})).then(e=>{if(m.current?.value||0===e.length){let t=m.current?.getBoundingClientRect();v?.(()=>e).onContextMenuCapture(void 0,t,{staticY:(t?.y||0)+(t?.height||0)})}})},[v,E,s,w,y,b]),(0,a.useEffect)(()=>{m.current&&(m.current.value="",r(""))},[b]),(0,i.jsxs)(A,{children:[(0,i.jsx)("input",{ref:m,onChange:({target:e})=>{l.current=!0,r(e.value)},onFocus:()=>(0,f.Ig)([x.xc,x.iu]),placeholder:"Search",...x.Le}),(0,i.jsx)(o.Search,{})]})}),m=s.Ay.nav.withConfig({componentId:"sc-6585f011-0"})(["background-color:rgb(25,25,25);display:flex;height:",';svg{color:#fff;fill:currentColor;height:16px;transition:color 0.35s ease;width:16px;}> button{height:16px;max-height:36px;max-width:34px;min-height:36px;min-width:34px;&[title^="Up"]{max-width:33px;min-width:33px;position:relative;right:-8px;top:-1px;}&[title="Recent locations"]{left:55px;position:absolute;svg{stroke:currentColor;stroke-width:3px;width:7px;}}&:active{svg{color:rgb(54,116,178);transition:none;}}&:hover{svg{color:rgb(50,152,254);}}&:disabled{svg{color:rgb(140,140,140);}}}'],({theme:e})=>e.sizes.fileExplorer.navBarHeight);var w=r(60978),v=r(41543),E=r(87952),y=r(90925);let C=({hideSearch:e,id:t,ref:r})=>{let{url:s,processes:{[t]:{url:A=""}}}=(0,d.N)(),c="/"===A?"":(0,n.basename)((0,n.dirname)(A)),{contextMenu:p,menu:h,setMenu:x}=(0,u.b)(),{canGoBack:C,canGoForward:k,history:j,moveHistory:S,position:B}=(0,v.A)(A,t),R=(0,a.useMemo)(()=>j.map((e,t)=>({action:()=>S(t-B),checked:B===t,label:(0,n.basename)(e)||g.l6,primary:B===t})).reverse(),[j,S,B]),{onContextMenuCapture:M}=(0,a.useMemo)(()=>p?.(()=>R),[p,R]),[I,O]=(0,a.useState)(!1),Q=(0,a.useRef)(null),[U,F]=(0,a.useState)(!1),z=(0,a.useCallback)(([{contentRect:e}])=>{let t=e.width<260;U&&!t?F(!1):!U&&t&&F(!0)},[U]);return(0,a.useEffect)(()=>{O(R===h.items)},[h.items,R]),(0,y.A)(Q.current,z),(0,i.jsxs)(m,{ref:Q,...(0,w.A)(t),onDragOver:f.CH,onDrop:f.CH,children:[(0,i.jsx)(E.A,{disabled:!C,onClick:()=>S(-1),...(0,f.Pf)(C?`Back to ${(0,n.basename)(j[B-1])||g.l6}`:"Back"),children:(0,i.jsx)(o.Back,{})}),(0,i.jsx)(E.A,{disabled:!k,onClick:()=>S(1),...(0,f.Pf)(k?`Forward to ${(0,n.basename)(j[B+1])||g.l6}`:"Forward"),children:(0,i.jsx)(o.Forward,{})}),(0,i.jsx)(E.A,{disabled:1===j.length,onClick:e=>{if(e.preventDefault(),I)x(Object.create(null));else{let{height:t=0,y:r=0,x:i=0}=Q.current?.getBoundingClientRect()||{};M((i||r)&&t?{pageX:i,pageY:r+t-3}:e)}},...(0,f.Pf)("Recent locations"),children:(0,i.jsx)(o.Down,{})}),(0,i.jsx)(E.A,{disabled:"/"===A,onClick:()=>s(t,(0,n.dirname)(A)),...(0,f.Pf)("/"===A?"Up one level":`Up to "${""===c?g.l6:c}"`),children:(0,i.jsx)(o.Up,{})}),(0,i.jsx)(l.A,{ref:r,id:t}),!e&&!U&&(0,i.jsx)(b,{id:t})]})};var k=r(51583),j=r(44260),S=r(6311);let B=s.Ay.div.withConfig({componentId:"sc-6b316e82-0"})(["",",","{height:",";}","{column-gap:2px;padding:6px 6px 6px 14px;figcaption{padding:1px 0 2px;}}","{height:",";}"],j.A,S.A,({theme:e})=>`calc(100% - ${e.sizes.fileExplorer.navBarHeight} - ${e.sizes.fileExplorer.statusBarHeight})`,S.A,k.default,({theme:e})=>`calc(100% - ${e.sizes.fileExplorer.navBarHeight} - ${e.sizes.fileExplorer.statusBarHeight})`);var R=r(91745),M=r(46285),I=r(56431);let O=({id:e})=>{let{icon:t,title:r,processes:{[e]:l},url:o}=(0,d.N)(),{componentWindow:s,closing:A,icon:c="",url:u=""}=l||{},{fs:h,rootFs:x}=(0,p.f)(),[b,m]=(0,a.useState)(u),w=(0,a.useRef)(null),v=(0,n.basename)(u),E=(0,I.getMountUrl)(u,x?.mntMap||{}),y=(0,a.useCallback)(e=>{if(e.altKey&&"D"===e.key.toUpperCase())(0,f.CH)(e),w.current?.focus(g.VD);else{let t=e?.target?.querySelector("ol li button");t?.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,ctrlKey:e.ctrlKey,key:e.key,shiftKey:e.shiftKey}))}},[]);return(0,a.useEffect)(()=>{u&&(r(e,v||g.l6),(!c||u!==b||E&&c!==g._A||c===g.tz)&&(E&&u===E?t(e,(0,I.isMountedFolder)(x?.mntMap[u])?g._A:g.PI):h&&(t(e,`/System/Icons/${v?"folder":"pc"}.webp`),(0,R.q_)(h,u).then(r=>{r&&t(e,r)})),m(u)))},[b,v,h,c,e,E,x?.mntMap,t,r,u]),(0,a.useEffect)(()=>{!s||A||u||(o(e,"/"),t(e,"/System/Icons/pc.webp"))},[A,e,s,t,o,u]),(0,a.useEffect)(()=>(s?.addEventListener("keydown",y),()=>s?.removeEventListener("keydown",y)),[s,y]),u?(0,i.jsxs)(B,{children:[(0,i.jsx)(C,{ref:w,hideSearch:!!E,id:e}),(0,i.jsx)(M.A,{id:e,url:u,showStatusBar:!0})]}):null}},51583:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});let i=r(33540).Ay.div.withConfig({componentId:"sc-29e5eb62-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;justify-content:center;mix-blend-mode:difference;padding-top:18px;}'])},68443:(e,t,r)=>{r.d(t,{$A:()=>A,V0:()=>s,cK:()=>o});var i=r(16286),n=r(91745),a=r(48060),l=r(37e3);let o=async(e,t,r)=>{if(!e)return;let{subIcons:o,icon:s,pid:A=a.hr[0],url:c}=await new Promise(r=>{e.lstat(t,(i,a)=>{let o=!i&&!!a&&a.isDirectory(),s=(0,l.uQ)(t);s&&!o?(0,n.O6)(e,t,s,e=>r(e)):(0,n.qz)(e,e.getRootFS(),t,o,!1,e=>r(e),!1)})});if(r?.aborted)return;let p=(0,l.t$)(c);return{icon:await (0,n.$j)(e,(0,i.join)(p?a.zP:a.jv,`${p?new URL(c).pathname.replace("/",""):c}${a.V9}`))||s,pid:A,subIcons:o?.includes(a.N9)?o:[],url:c||t}},s=(e,t)=>{let r=0===e.value.length,i=()=>{Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"value")?.set?.call(e,t),e.dispatchEvent(new Event("input",{bubbles:!0}))};i(),requestAnimationFrame(()=>r&&1===t.length&&2===e.value.length&&i())},A=(e,t,r,i,a)=>a?"Nostr URI":i?"App":r?"YouTube Video":e?.isDirectory()||!t?"File folder":(0,n.ti)(t)},60978:(e,t,r)=>{r.d(t,{A:()=>s});var i=r(96540),n=r(6191),a=r(78744),l=r(99204),o=r(48060);let s=e=>{let{contextMenu:t}=(0,a.b)(),{onClose:r,onMaximize:s,onMinimize:A}=(0,n.A)(e),{processes:{[e]:c}}=(0,l.N)(),{allowResizing:p=!0,hideMaximizeButton:u,hideMinimizeButton:d,maximized:h,minimized:g}=c||{};return(0,i.useMemo)(()=>t?.(()=>{let e=h||g,t=!u||!d;return[t&&{action:()=>{g?A():s()},disabled:!e,icon:e?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABnRSTlMAAAAAAABupgeRAAAAOklEQVR4AWMYVmA2BiBN/6JFi3DKrcUAEEGcGnZiAIggTg1HwQCNDSSpp+H8hQtoiECAXMcADMMbAABMtF75qvi0qwAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAJElEQVR42mNABaPA09PzPzZMsaFk20x/A2D8gTIAE9Mp+kYBAJPzT5+OMe9rAAAAAElFTkSuQmCC",label:"Restore"},!d&&{action:A,disabled:g,icon:g?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGElEQVR42mMYPGAUjAJPT8//+DCNDRgFAPTaHaFVv24VAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIUlEQVR42mMYPGAUjIIDBw78x4cJGnDu3Ln/+DB+3aMAAPFzNUFuAVJEAAAAAElFTkSuQmCC",label:"Minimize"},!u&&{action:s,disabled:e||!p,icon:e?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHklEQVR42mOgEhgFnp6e//Fh+hmALj5UDBj4QBwFANQKUXn4YyGJAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAR0lEQVR42u3IoRHAMAzFUO+/gllKG5IgD2DujX4vC8ikMO9ORHb9xN1FWWc8Q5R15jt1gs/22jrBZxGhE3yWmaKsU1Wi7EIfHneIsXEKuhAAAAAASUVORK5CYII=",label:"Maximize"},t&&o.kG,{action:r,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABnRSTlMAAAAAAABupgeRAAAAMElEQVR4AWMgEoyC2TCAwsYPFqMCouzZCQPEOmzvnj0QRJTqo6iAgOoLMIDCHsYAACjTO7/gCQlBAAAAAElFTkSuQmCC",label:"Close"}].filter(Boolean)}),[p,t,u,d,h,g,r,s,A])}},41543:(e,t,r)=>{r.d(t,{A:()=>a});var i=r(96540),n=r(99204);let a=(e,t)=>{let{url:r}=(0,n.N)(),[a,l]=(0,i.useState)(e),[o,s]=(0,i.useState)(()=>[e]),[A,c]=(0,i.useState)(0),p=(0,i.useCallback)(e=>{let i=A+e;c(i),l(o[i]),r(t,o[i])},[r,o,t,A]);return(0,i.useEffect)(()=>{e!==a&&(c(A+1),l(e),s([...o.slice(0,A+1),e]))},[a,o,A,e]),{canGoBack:A>0,canGoForward:A<o.length-1,currentUrl:a,history:o,moveHistory:p,position:A}}},90925:(e,t,r)=>{r.d(t,{A:()=>n});var i=r(96540);let n=(e,t)=>{let[r,n]=(0,i.useState)();(0,i.useEffect)(()=>{t&&n(new ResizeObserver(t))},[t]),(0,i.useEffect)(()=>(e instanceof HTMLElement&&r?.observe(e),()=>{e instanceof HTMLElement&&r?.unobserve(e)}),[e,r])}},89622:(e,t,r)=>{r.d(t,{iu:()=>A,Le:()=>p,xc:()=>c,od:()=>f,SQ:()=>x});var i=r(16286),n=r(96540),a=r(25559);let l=JSON.parse('{"X":[".cache",".json"],"P":[".md",".txt",".whtml"]}');var o=r(48060),s=r(37e3);let A="/.index/search.lunr.json",c="/System/lunr/lunr.min.js",p={"aria-label":"Search",enterKeyHint:"search",inputMode:"search",name:"search",type:"search",...o.m8},u=Object.create(null),d=[],h=async(e,t)=>{if(window.lunr||await (0,s.aY)([c]),!t&&!u?.search){let e=await fetch(A,o.c9);try{let{paths:t,...r}=JSON.parse(await e.text());u=window.lunr?.Index.load(r),d=t}catch{}}let r=t??u,i=[],n=e.trim().replace(/\./g," ").replace(/\*~\^-\+/g,"");try{i=r.search?.(n),i?.length===0&&(i=r.search?.(`${n.split(" ").join("* ")}*`))}catch{}return i?i.map(e=>({...e,ref:(Object.prototype.hasOwnProperty.call(d,e.ref)?d[e.ref]:e.ref)||""})):[]},g=async(e,t)=>{let r=t?._getFs("/")?.fs,n=r?.getOverlayedFileSystems(),a=n?.writable,o=("function"==typeof a?._cache?.map?.keys&&[...a._cache.map.keys()]||Object.keys(a?._cache?.map||{})||[]).filter(e=>{let t=(0,s.uQ)(e);return!!t&&!l.X.includes(t)}),A=await Promise.all(o.map(async t=>{let r=(0,i.basename)(t,(0,i.extname)(t));return{name:r,path:t,text:l.P.includes((0,s.uQ)(t))?`${r} ${(await e(t)).toString()}`:r}})),c=window.lunr?.(function(){this.ref("path"),this.field("name"),this.field("text"),A.forEach(e=>this.add(e))});return window.lunr?.Index.load(c.toJSON())},f=async(e,t,r)=>{let i=await h(e),n=await g(t,r);return[...i,...await h(e,n)].sort((e,t)=>t.score-e.score)},x=e=>{let[t,r]=(0,n.useState)([]),{readFile:i,rootFs:l}=(0,a.f)();return(0,n.useEffect)(()=>{(async()=>{e.length>0?(window.lunr||await (0,s.aY)([c]),h(e).then(r),g(i,l).then(t=>h(e,t).then(e=>r(t=>[...t,...e].sort((e,t)=>t.score-e.score))))):r([])})()},[i,l,e]),t}}}]);