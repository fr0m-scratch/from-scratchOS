"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1583,6008],{46008:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var i=n(74848),r=n(33540);let a=r.Ay.div.withConfig({componentId:"sc-f73b169e-0"})(["height:",";width:100%;"],({theme:e})=>`calc(100% - ${e.sizes.titleBar.height}px)`);var s=n(96540),l=n(16602),o=n(99204),c=n(45694),d=n(48060),u=n(37e3),f=n(67255);let m=({containerRef:e,id:t,setLoading:n,loading:i})=>{let{processes:{[t]:a}={}}=(0,o.N)(),m=(0,l.A)(),{windowStates:{[t]:h}}=(0,c.w)(),{size:y}=h||{},{componentWindow:v,libs:w,maximized:p}=a||{},{sizes:{titleBar:g}}=(0,r.DP)(),b=(0,f.A)(t,e,void 0,"canvas { height: 100%; width: 100%; }",!0),[C,E]=(0,s.useState)();(0,s.useEffect)(()=>{setTimeout(()=>{let e=y;if(!e&&v){let{height:t,width:n}=v.getBoundingClientRect();e={height:t,width:n}}e&&(C?.CCModule.setCanvasSize?.(u.kl(e.width),u.kl(e.height)-g.height),C?.CCModule.OnResize?.())},d.UW.WINDOW)},[v,C?.CCModule,p,y,g.height]),(0,s.useEffect)(()=>{if(i){let e=b?.();if(!e)return;let t=e?.document.querySelector("canvas");t.addEventListener("contextmenu",u.CH),e.CCModule={arguments:["Singleplayer"],canvas:t,postRun:[()=>{n(!1),E(e),m(e.FS,"ClassiCube")},()=>{let{width:e,height:n}=t.getBoundingClientRect()||{};t.width=e,t.height=n}],print:console.info,setStatus:console.info,windowElement:e.document.body},(0,u.aY)(w,void 0,void 0,void 0,e)}},[b,w,i,m,n])};var h=n(14153);let y=({id:e})=>(0,i.jsx)(h.A,{StyledComponent:a,id:e,useHook:m})},14153:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(74848),r=n(96540),a=n(33540),s=n(51583),l=n(8218),o=n(99204);let c=a.Ay.div.withConfig({componentId:"sc-5da8521e-0"})([""]),d=(0,r.memo)(({id:e,useHook:t,StyledComponent:n,children:a})=>{let{processes:{[e]:{url:d=""}={}}}=(0,o.N)(),u=(0,r.useRef)(null),[f,m]=(0,r.useState)(!0),h=(0,r.useMemo)(()=>({contain:"strict",visibility:f?"hidden":"visible"}),[f]);return t({containerRef:u,id:e,loading:f,setLoading:m,url:d}),(0,i.jsxs)(i.Fragment,{children:[f&&(0,i.jsx)(s.default,{}),(0,i.jsx)(n||c,{ref:u,style:h,...(0,l.A)({id:e}),children:a})]})})},51583:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});let i=n(33540).Ay.div.withConfig({componentId:"sc-29e5eb62-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;justify-content:center;mix-blend-mode:difference;padding-top:18px;}'])},16602:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(96540),r=n(25559);let a=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:n}=(0,r.f)(),a=(0,i.useRef)("");return(0,i.useEffect)(()=>()=>{if(a.current){let e=a.current;a.current="",t(e,!0).then(()=>n("/",void 0,e)).catch(()=>{})}},[t,n]),(0,i.useCallback)(async(t,i)=>{if(!t)return;let r="";try{r=await e(t,i)}catch{}r&&(n("/",r),a.current=r)},[e,n])}},8218:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(16286),r=n(96540),a=n(51780),s=n(16091),l=n(13296),o=n(25559),c=n(99204),d=n(45694),u=n(48060),f=n(37e3),m=n(63461);let h=({callback:e,directory:t=u.Bn,id:n,onDragLeave:h,onDragOver:y,updatePositions:v})=>{let{url:w}=(0,c.N)(),p=(0,m.w)(),{iconPositions:g,sortOrders:b,setIconPositions:C}=(0,d.w)(),{exists:E,mkdirRecursive:A,updateFolder:k,writeFile:x}=(0,o.f)(),S=(0,r.useCallback)(async(e,t,r)=>{if(n){if(t){let a=(0,i.join)(u.Bn,e);if(await A(u.Bn),await x(a,t,!0))return r===l.z.UPDATE_URL&&w(n,a),k(u.Bn,e),(0,i.basename)(a)}else r===l.z.UPDATE_URL&&w(n,e)}return""},[n,A,k,w,x]),{openTransferDialog:D}=(0,a.A)();return{onDragLeave:h,onDragOver:(0,r.useCallback)(e=>{y?.(e),(0,f.CH)(e)},[y]),onDrop:(0,r.useCallback)(r=>{if(u.jj.has((0,f.uQ)(t)))return;if(v&&r.target instanceof HTMLElement){let{files:e,text:n}=(0,s.bn)(r);if(0===e.length&&""===n)return;(async()=>{let a={x:r.clientX,y:r.clientY},s=[];if(n){try{s=JSON.parse(n)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,i.basename)(e)===(0,i.relative)(t,e))return;s=s.map(e=>(0,i.basename)(e))}else e instanceof FileList?s=[...e].map(e=>e.name):s=[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);s=await Promise.all(s.map(async e=>{let n=`${t}/${e}`;if(!g[n]||!await E(n))return e;let r=0;do r+=1,n=`${t}/${(0,i.basename)(e,(0,i.extname)(e))} (${r})${(0,i.extname)(e)}`;while(g[n]&&await E(n));return(0,i.basename)(n)})),(0,f.$Y)(t,r.target,g,b,a,s,C,E)})()}let a="string"==typeof n;a&&!v&&t===u.Bn&&p.current[n]?.componentWindow?.focus(u.VD),(0,s.nX)(r,e||S,t,D,a)},[e,t,E,g,n,D,p,C,b,v,S])}}},67255:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(96540),r=n(8218),a=n(48060),s=n(99204),l=n(45694);let o=e=>{let t=e.createElement("canvas");return t.id="canvas",t.style.width="100%",t.style.height="100%",t.tabIndex=-1,e.body.append(t),t},c=(e,t,n)=>{let i=document.createElement("iframe");i.title=e,i.style.backgroundColor="transparent",i.style.border="0",i.style.width="100%",i.style.height="100%",t.append(i);let r=i.contentDocument;r.open(),r.write(`
    <!DOCTYPE html>
    ${n?`<head><style>${n}</style></head>`:"<head />"}
    <body />
    `),r.close();let a=i.contentWindow;return a.document.documentElement.style.height="100%",a.document.documentElement.style.width="100%",a.document.body.style.height="100%",a.document.body.style.width="100%",a.document.body.style.margin="0",a.document.body.style.overflow="hidden",i},d=(e,t,n,d,u=!1)=>{let[f,m]=(0,i.useState)(),[h,y]=(0,i.useState)(),{onDragOver:v,onDrop:w}=(0,r.A)({id:e}),{processes:{[e]:{maximized:p}={}}={}}=(0,s.N)(),{foregroundId:g,setForegroundId:b}=(0,l.w)(),C=(0,i.useCallback)(()=>{let t;if(!f)return;f.querySelector("iframe")?.remove();let n=c(e,f,d),i=n.contentWindow;u&&(t=o(n.contentDocument));let r=()=>{u&&t?t.focus(a.VD):i.focus(),b(e)};return i.addEventListener("click",r),i.addEventListener("focus",r),i.addEventListener("blur",()=>b("")),i.addEventListener("dragover",v),i.addEventListener("drop",w),y(i),i},[f,e,v,w,b,d,u]);return(0,i.useLayoutEffect)(()=>{h&&g===e&&requestAnimationFrame(()=>{n?n(h):u?h.document.querySelector("canvas")?.focus(a.VD):h.focus()})},[h,n,g,e,p,u]),(0,i.useEffect)(()=>{if(!f){let e=()=>{requestAnimationFrame(()=>{t.current?m(t.current):e()})};e()}},[f,t]),(0,i.useMemo)(()=>f?C:void 0,[f,C])}}}]);