"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1583,6789,8941],{28941:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(74848),r=n(33540),i=n(57725);let l=r.Ay.div.withConfig({componentId:"sc-4f9faf66-0"})(["&.drop{",";}"],(0,i.A)("Drop rom file here","#f1f1f1"));var o=n(16286),s=n(96540),c=n(75943),d=n(16602),u=n(55650),f=n(25559),w=n(99204),m=n(48060),p=n(37e3),h=n(16789),S=n(40978),b=n(48287).Buffer;let v=e=>Object.entries(c.W).find(([,{ext:t}])=>t.includes(e))||[],y=({containerRef:e,id:t,loading:n,setLoading:a,url:r})=>{let{exists:i,readFile:l}=(0,f.f)(),{createSnapshot:c}=(0,S.p)(),y=(0,d.A)(),{linkElement:E,processes:{[t]:{closing:g=!1,libs:A=[]}={}}={}}=(0,w.N)(),{prependFileToTitle:$}=(0,u.A)(t),F=(0,s.useRef)(void 0),_=(0,s.useRef)(""),j=(0,s.useCallback)(async()=>{if(!r)return;if(e.current?.classList.remove("drop"),_.current){if(_.current!==r){_.current="";try{window.EJS_terminate?.()}catch{}if(e.current){let t=document.createElement("div");t.id="emulator",[...e.current.children].forEach(e=>e.remove()),e.current.append(t),j()}}return}_.current=r,window.EJS_gameName=(0,o.basename)(r,(0,o.extname)(r));let[t,{core:n="",zip:s=!1}={}]=v((0,p.uQ)(r)),d=await l(r);window.EJS_gameUrl=(0,p.Zd)(s?b.from(await (0,h.zipAsync)({[(0,o.basename)(r)]:d})):d),window.EJS_core=n;let u=`${(0,o.basename)(r)}.sav`,f=(0,o.join)(m.Sb,u);window.EJS_onGameStart=({detail:{emulator:e}})=>{(async()=>{await i(f)&&e.loadState?.(await l(f)),a(!1),y(window.FS,"EmulatorJs"),F.current=e})()},window.EJS_onSaveState=({screenshot:e,state:t})=>{window.EJS_terminate?.(),t&&c(u,b.from(t),b.from(e))},window.EJS_player="#emulator",window.EJS_biosUrl="",window.EJS_pathtodata="Program Files/EmulatorJs/",window.EJS_startOnLoaded=!0,window.EJS_RESET_VARS=!0,window.EJS_Buttons={cacheManage:!1,loadState:!1,quickLoad:!1,quickSave:!1,saveState:!1,screenRecord:!1,screenshot:!1},await (0,p.aY)(A,void 0,!0),$(`${window.EJS_gameName} (${t})`)},[e,c,i,A,y,$,l,a,r]);(0,s.useEffect)(()=>{r?j():(a(!1),y(window.FS,"EmulatorJs"),e.current?.classList.add("drop"))},[e,j,y,a,r]),(0,s.useEffect)(()=>{if(!n){let n=e.current?.querySelector("canvas");n instanceof HTMLCanvasElement&&E(t,"peekElement",n)}return()=>{!n&&g&&F.current?.elements.buttons.saveState?.click()}},[g,e,t,E,n])};var E=n(14153);let g=({id:e})=>(0,a.jsx)(E.A,{StyledComponent:l,id:e,useHook:y,children:(0,a.jsx)("div",{id:"emulator"})})},14153:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(74848),r=n(96540),i=n(33540),l=n(51583),o=n(8218),s=n(99204);let c=i.Ay.div.withConfig({componentId:"sc-5da8521e-0"})([""]),d=(0,r.memo)(({id:e,useHook:t,StyledComponent:n,children:i})=>{let{processes:{[e]:{url:d=""}={}}}=(0,s.N)(),u=(0,r.useRef)(null),[f,w]=(0,r.useState)(!0),m=(0,r.useMemo)(()=>({contain:"strict",visibility:f?"hidden":"visible"}),[f]);return t({containerRef:u,id:e,loading:f,setLoading:w,url:d}),(0,a.jsxs)(a.Fragment,{children:[f&&(0,a.jsx)(l.default,{}),(0,a.jsx)(n||c,{ref:u,style:m,...(0,o.A)({id:e}),children:i})]})})},51583:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});let a=n(33540).Ay.div.withConfig({componentId:"sc-29e5eb62-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;justify-content:center;mix-blend-mode:difference;padding-top:18px;}'])},16602:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(96540),r=n(25559);let i=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:n}=(0,r.f)(),i=(0,a.useRef)("");return(0,a.useEffect)(()=>()=>{if(i.current){let e=i.current;i.current="",t(e,!0).then(()=>n("/",void 0,e)).catch(()=>{})}},[t,n]),(0,a.useCallback)(async(t,a)=>{if(!t)return;let r="";try{r=await e(t,a)}catch{}r&&(n("/",r),i.current=r)},[e,n])}},8218:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(16286),r=n(96540),i=n(51780),l=n(16091),o=n(13296),s=n(25559),c=n(99204),d=n(45694),u=n(48060),f=n(37e3),w=n(63461);let m=({callback:e,directory:t=u.Bn,id:n,onDragLeave:m,onDragOver:p,updatePositions:h})=>{let{url:S}=(0,c.N)(),b=(0,w.w)(),{iconPositions:v,sortOrders:y,setIconPositions:E}=(0,d.w)(),{exists:g,mkdirRecursive:A,updateFolder:$,writeFile:F}=(0,s.f)(),_=(0,r.useCallback)(async(e,t,r)=>{if(n){if(t){let i=(0,a.join)(u.Bn,e);if(await A(u.Bn),await F(i,t,!0))return r===o.z.UPDATE_URL&&S(n,i),$(u.Bn,e),(0,a.basename)(i)}else r===o.z.UPDATE_URL&&S(n,e)}return""},[n,A,$,S,F]),{openTransferDialog:j}=(0,i.A)();return{onDragLeave:m,onDragOver:(0,r.useCallback)(e=>{p?.(e),(0,f.CH)(e)},[p]),onDrop:(0,r.useCallback)(r=>{if(u.jj.has((0,f.uQ)(t)))return;if(h&&r.target instanceof HTMLElement){let{files:e,text:n}=(0,l.bn)(r);if(0===e.length&&""===n)return;(async()=>{let i={x:r.clientX,y:r.clientY},l=[];if(n){try{l=JSON.parse(n)}catch{}if(!Array.isArray(l))return;let[e]=l;if(!e||e.startsWith(t)&&(0,a.basename)(e)===(0,a.relative)(t,e))return;l=l.map(e=>(0,a.basename)(e))}else e instanceof FileList?l=[...e].map(e=>e.name):l=[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);l=await Promise.all(l.map(async e=>{let n=`${t}/${e}`;if(!v[n]||!await g(n))return e;let r=0;do r+=1,n=`${t}/${(0,a.basename)(e,(0,a.extname)(e))} (${r})${(0,a.extname)(e)}`;while(v[n]&&await g(n));return(0,a.basename)(n)})),(0,f.$Y)(t,r.target,v,y,i,l,E,g)})()}let i="string"==typeof n;i&&!h&&t===u.Bn&&b.current[n]?.componentWindow?.focus(u.VD),(0,l.nX)(r,e||_,t,j,i)},[e,t,g,v,n,j,b,E,y,h,_])}}},55650:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(96540),r=n(99204),i=n(25573),l=n(48060);let o=e=>{let{title:t}=(0,r.N)(),[n]=e.split(l.QB),{title:o}=i.A[n]||{};return{appendFileToTitle:(0,a.useCallback)((n,a)=>{let r=n?` - ${n}${a?` ${l.g6}`:""}`:"";t(e,`${o}${r}`)},[e,o,t]),prependFileToTitle:(0,a.useCallback)((n,a,r)=>{let i=n?`${a?`${l.g6} `:""}${n}${r?" ":" - "}`:"";t(e,`${i}${o}`)},[e,o,t])}}},40978:(e,t,n)=>{n.d(t,{p:()=>o});var a=n(16286),r=n(96540),i=n(25559),l=n(48060);let o=()=>{let{createPath:e,updateFolder:t}=(0,i.f)();return{createSnapshot:(0,r.useCallback)(async(n,r,i,o=!0,s=l.Sb)=>{let c="";try{if((c=await e(n,s,r,void 0,o))&&i)try{let t="function"==typeof i?await i():i;t&&await e(`${(0,a.join)(s,c)}${l.V9}`,l.jv,t,void 0,o)}catch{}t((0,a.dirname)(s)),t(s,c)}catch{}return c},[e,t])}}},57725:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(33540);let r=(e,t)=>(0,a.AH)(["&::before{color:",';content:"','";display:flex;font-size:16px;font-weight:600;height:100%;left:0;place-content:center;place-items:center;position:absolute;top:0;width:100%;}'],t,e)},16789:(e,t,n)=>{n.d(t,{addEntryToZippable:()=>s,addFileToZip:()=>u,createZippable:()=>o,isFileInZip:()=>f,unarchive:()=>w,unzip:()=>c,zipAsync:()=>d});var a=n(16286),r=n(37e3),i=n(48060),l=n(48287).Buffer;let o=(e,t)=>e.split("/").reduceRight((e,t)=>({[t]:e}),[t,i.X8]),s=(e,t)=>{let[[n,a]]=Object.entries(t);return e[n]=n in e?s(e[n],t[n]):a,e},c=e=>new Promise((t,a)=>{n.e(9861,"high").then(n.bind(n,69861)).then(({unzip:n})=>n(e,(e,n)=>e?a(e):t(n)))}),d=(e,t=i.X8)=>new Promise((a,r)=>{n.e(9861,"high").then(n.bind(n,69861)).then(({zip:n})=>n(e,t,(e,t)=>e?r(e):a(t)))}),u=async(e,t,n,a)=>l.from(await d(s(e.length>0&&await c(e)||{},o(n,await a(t))))),f=(e,t)=>new Promise((a,r)=>{n.e(9861,"high").then(n.bind(n,69861)).then(({unzip:n})=>n(e,(e,n)=>e?r(e):a(Object.keys(n).includes(t))))}),w=async(e,t)=>{if(window.SevenZip||await (0,r.aY)(["System/7zip/7zz.es6.js"]),!window.SevenZip)return{};let n=await window.SevenZip(),i=(0,a.basename)(e),o=(0,a.join)("/",(0,a.basename)(e,(0,a.extname)(e)));n.FS.mkdir(o),n.FS.chdir(o);let s=n.FS.open(i,"w+");n.FS.write(s,t,0,t.length),n.FS.close(s),n.callMain(["-y","x",i]);let c=n.FS.readdir(o),d=e=>(t,r)=>{if([".","..",i].includes(r))return t;let s=(0,a.join)(e,r),c=s.replace(o,"");try{n.FS.chmod(s,511)}catch{}return Object.assign(t,n.FS.isDir(n.FS.stat(s).mode)?{[(0,a.join)(c,"/")]:l.from(""),...n.FS.readdir(s).reduce(d(s),{})}:{[c]:n.FS.readFile(s,{flags:"r"})}),t};return c.reduce(d(o),{})}}}]);